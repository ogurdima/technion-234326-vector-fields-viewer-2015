<Window x:Class="ParameterWindow.ParameterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:parameterWindow="clr-namespace:ParameterWindow"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        Width="400"
        Height="300"
        MinWidth="300"
        Background="Azure"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        ResizeMode="NoResize"
        ShowInTaskbar="True"
        WindowStyle="ToolWindow">

    <Window.Resources>
        <Style TargetType="{x:Type ListViewItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListViewItem}">
                        <ContentPresenter Margin="5,1"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        </Style>
    </Window.Resources>

    <DockPanel Loaded="LoadedWindow">

        <Border BorderBrush="Black"
                BorderThickness="1"
                DockPanel.Dock="Top">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <Label HorizontalAlignment="Left"
                       Content="Mesh:"
                       DockPanel.Dock="Top" />

                <DockPanel Grid.Row="1"
                           Grid.Column="0"
                           Grid.ColumnSpan="2">
                    <Button Click="LoadMesh" DockPanel.Dock="Right">Load . . .</Button>
                    <TextBox Name="MeshPath" IsReadOnly="True" />
                </DockPanel>

                <Label Grid.Row="2"
                       Grid.Column="0"
                       HorizontalAlignment="Left"
                       Content="Mesh color:" />

                <xctk:ColorPicker Grid.Row="2"
                                  Grid.Column="1"
                                  Width="70"
                                  HorizontalAlignment="Left"
                                  ColorMode="ColorCanvas"
                                  DockPanel.Dock="Bottom"
                                  SelectedColor="{Binding MeshColor,
                                                          Mode=TwoWay}" />
            </Grid>
        </Border>

        <Border BorderBrush="Black"
                BorderThickness="1"
                DockPanel.Dock="Top">
            <Grid DockPanel.Dock="Top">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <Label HorizontalAlignment="Left"
                       Content="Field:"
                       DockPanel.Dock="Top" />

                <DockPanel Grid.Row="1"
                           Grid.Column="0"
                           Grid.ColumnSpan="2">
                    <Button Click="LoadField" DockPanel.Dock="Right">Load . . .</Button>
                    <TextBox Name="FieldPath" IsReadOnly="True" />
                </DockPanel>

                <Label Grid.Row="2"
                       Grid.Column="0"
                       HorizontalAlignment="Left"
                       Content="Evolution period(msec):" />
                <xctk:IntegerUpDown Grid.Row="2"
                                    Grid.Column="1"
                                    Width="70"
                                    HorizontalAlignment="Left"
                                    Increment="5"
                                    Maximum="5000"
                                    Minimum="1"
                                    Value="{Binding Timeout}" />

                <Label Grid.Row="3"
                       Grid.Column="0"
                       HorizontalAlignment="Left"
                       Content="Path time window:" />
                <xctk:DoubleUpDown Grid.Row="3"
                                   Grid.Column="1"
                                   Width="70"
                                   HorizontalAlignment="Left"
                                   Increment="0.001"
                                   Minimum="0"
                                   Value="{Binding PathWindow}" />

                <Label Grid.Row="4"
                       Grid.Column="0"
                       HorizontalAlignment="Left"
                       Content="Field color:" />

                <xctk:ColorPicker Grid.Row="4"
                                  Grid.Column="1"
                                  Width="70"
                                  HorizontalAlignment="Left"
                                  ColorMode="ColorCanvas"
                                  DockPanel.Dock="Bottom"
                                  SelectedColor="{Binding FieldColor,
                                                          Mode=TwoWay}" />
            </Grid>
        </Border>




        <ListView ItemsSource="{Binding Source={x:Static parameterWindow:DrawState.Values}}"
                  SelectedItem="{Binding SelectedDrawState,
                                         Mode=TwoWay}"
                  SelectionMode="Single">
            <ListView.ItemTemplate>
                <DataTemplate DataType="parameterWindow:DrawState">
                    <RadioButton Content="{Binding Name}"
                                 GroupName="state"
                                 IsChecked="{Binding RelativeSource={RelativeSource FindAncestor,
                                                                                    AncestorType={x:Type ListViewItem}},
                                                     Path=IsSelected,
                                                     Mode=TwoWay}" />
                </DataTemplate>
            </ListView.ItemTemplate>

        </ListView>

    </DockPanel>
</Window>
